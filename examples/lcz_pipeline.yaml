context_parser: pypyr.parser.keyvaluepairs
steps:
  - name: peony.cmd
    onError: 'upsampling failed for {path} in {workdir}'
    in:
      stepname: upsample
      outputFile: '{workdir}/upsampled.tif'
      cmd:
        run: /usr/local/snap/bin/gpt /peony/test/bandselect_upsampling.xml -Pinput={path} -Poutput={workdir}/upsampled.tif
        cwd: '{workdir}'
        stdout: '{workdir}/upsample.stdout.log'
        stderr: '{workdir}/upsample.stderr.log'


on_failure:
  - name: pypyr.steps.filewrite
    in:
      fileWrite:
        path: '{logfile}'
        payload: "FAILURE: {runErrors[0][customError]}\n"
        append: True
